{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "aa6c1f59_ba575d13",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 44628
      },
      "writtenOn": "2022-04-30T15:40:34Z",
      "side": 1,
      "message": "Could just return here; no need for the label.",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1139ccf_4a17078c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 307354
      },
      "writtenOn": "2022-05-17T15:14:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aa6c1f59_ba575d13",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23648d05_0db5e04e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 44628
      },
      "writtenOn": "2022-04-30T15:40:34Z",
      "side": 1,
      "message": "Wouldn\u0027t it be sufficient to run applyFilterToParents(p) here in line 162 instead of at the beginning of the loop? Not that it\u0027ll matter much, but it seems to fit the incremental nature of the algorithm better.",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bfe174a3_37fee130",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 307354
      },
      "writtenOn": "2022-05-17T15:14:52Z",
      "side": 1,
      "message": "No, this would break the algorithm. \n\nIn the next() method, we make sure that the filter has been applied to the parents of commit c. We then enter the rewrite() method with a parent p of commit c. At this point, the filter has (probably) not been applied to the parents of p and therefore we must apply the filter to the parents of p at the beginning.",
      "parentUuid": "23648d05_0db5e04e",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e40cf7f6_7caa8bfe",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 44628
      },
      "writtenOn": "2022-05-17T18:03:19Z",
      "side": 1,
      "message": "\u003e No, this would break the algorithm. \n\u003e \n\u003e In the next() method, we make sure that the filter has been applied to the parents of commit c. We then enter the rewrite() method with a parent p of commit c.\n\nExactly.\n\n\u003e At this point, the filter has (probably) not been applied to the parents of p and therefore we must apply the filter to the parents of p at the beginning.\n\nThe tree filter does not remove the parent. It only marks it. Applying the filter to p\u0027s parents doesn\u0027t change the state of p itself. So doing it just before actually considering a parent is perfectly fine. On entry to rewrite(), applyFilterToParents() was already called for the child to be produced, and the filter was already aplied to p. But not yet to the parents of p.",
      "parentUuid": "bfe174a3_37fee130",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62c94c18_52f5e05e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RewriteGenerator.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 307354
      },
      "writtenOn": "2022-05-18T12:15:00Z",
      "side": 1,
      "message": "After looking at the source code again I concluded that you\u0027re right - sorry for the confusion. I just committed a new patch set. \n\nNot that it matters but here\u0027s the reason why I was confused: \nIn the rewrite method, the number of parents is checked in line 135. I assumed that the number of parents of p can still change by calling applyFilterToParents to p (and thus I immediately called applyFilterToParents to p). When TreeRefFilter has been applied to p, the number of parents does not change anymore (TreeRefFilter might have removed a parent during the application of the filter if the parent is !TREESAME to a merge commit). \n\nThanks for the fast and constructive reply!",
      "parentUuid": "e40cf7f6_7caa8bfe",
      "revId": "82a613d631b451229b341a447297589a0db8e469",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}