{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fc43c6db_edf7ee01",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1021966
      },
      "writtenOn": "2024-08-21T15:44:13Z",
      "side": 1,
      "message": "Why do we need this strange SubmoduleClone? Can\u0027t we deal with it in FileRepository, lines 296 to 304, directly?",
      "revId": "52232a1e1fc2311d8a3630d0651cfef84bb819f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51524d51_b94d0e71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1037602
      },
      "writtenOn": "2024-09-15T10:13:37Z",
      "side": 1,
      "message": "Modifiying FileRepository directly was my first approach also. But combined with the fix  proposed in [1] I thought it best to combine both in a new class which takes care about the \"special handling\" in one common place.\n\nPossible alternative approaches(w/o introducing the new class): \na) Add a new public method \"create(boolean bare, boolean relDir)\" to FileRepository which allows the use of a relative path depending on \"relDir\". The current \"create\" method (line 225) can then be redirected to it.\nBenefit: backward compatible, the possibility to use a relative dir is independent of the submodule use case\n\nb) Add a switch to existing code in lines 296 to 304 evaluating the repository path. If the path contains \"modules\"(to identify the submodule usecase) create a relative dir otherwise a absolute one.\nBenefit: changes as less code as possible \nDrawback compared to a): relative paths work for submodulds only.\n\nImplementing either alternative approach implies a rework of [1] as the new class is mssing.\n\n\n [1] https://eclipse.gerrithub.io/c/eclipse-jgit/jgit/+/1198662/",
      "parentUuid": "fc43c6db_edf7ee01",
      "revId": "52232a1e1fc2311d8a3630d0651cfef84bb819f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "da5c3a76_857f27f7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1021966
      },
      "writtenOn": "2024-09-19T08:57:19Z",
      "side": 1,
      "message": "So we want to do this only for submodules.\n\nI don\u0027t quite like the fact that the current code writes the two paths first \"wrongly\" (with absolute paths) and then later corrects that. There\u0027s a window during which other code might read the \"wrong\" path, and the file is locked twice.\n\nWhy not add a separate flag and setter for this on FileRepository? If the flag is true, use relative paths, otherwise absolute paths. Then set the flag in the CloneCommand invocation in SubmoduleUpdateCommand. And if somebody wants to use a relative path for a normal clone that\u0027s then also possible.\n\nThe other change for jgit-79 (\"re-init\") could be done directly inside SubmoduleUpdateCommand.",
      "parentUuid": "51524d51_b94d0e71",
      "revId": "52232a1e1fc2311d8a3630d0651cfef84bb819f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}