{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d3cedc01_271466a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1021966
      },
      "writtenOn": "2025-08-08T14:06:55Z",
      "side": 1,
      "message": "I\u0027m not sure this is OK. The contract of `CommitGraphWriter.write(ProgressMonitor, OutputStream)` is now broken. The javadoc there said \"the caller is responsible for closing the stream\", which is no longer true now. It made sense since the stream is an input parameter. So _that\u0027s_ why this stream was not a `FilterOutputStream`, and why it didn\u0027t forward the `close()`.\n\nNote that `MultiPackIndexWriter` also uses the `CancellableDigestOutputStream`, and `PackOutputStream` _is_ a `CancellableDigestOutputStream`. `PackWriter.writePack()` also says the caller should close the stream... so does `BundleWriter.writeBundle()`.\n\nAt the very least these javadocs are now all wrong. But I have the feeling that these javadocs are actually right, and now the implementation is wrong. This stream was intended to be used in an incremental manner (which is also the reason for the `channel.force()`) on a single global output stream, which is opened and closed by the caller.",
      "revId": "1c0df94261d63b13c8e42dde1700a13001725f85",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6ba80af_0c6a416f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1038403
      },
      "writtenOn": "2025-08-08T14:40:24Z",
      "side": 1,
      "message": "The CommitGraphWriter.write() does sound broken now, I should have taken the opposite approach for it and removed it from the try-wit-resource. Same goes fro MultiPackINdexWriter, although that needs to happen during the up merges, as it is not on stable-6.10.\n\nAs for the PackWriter.writePack() and  BundleWriter.writeBundle(), they do not seem to close the stream that I can see, so I think they should be OK.",
      "parentUuid": "d3cedc01_271466a1",
      "revId": "1c0df94261d63b13c8e42dde1700a13001725f85",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "582bed9a_942498ba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1038403
      },
      "writtenOn": "2025-08-08T15:01:31Z",
      "side": 1,
      "message": "\u003e The CommitGraphWriter.write() does sound broken now, I should have taken the opposite approach for it and removed it from the try-wit-resource. \n\nDone. https://eclipse.gerrithub.io/c/eclipse-jgit/jgit/+/1219719 Prevent CommitGraphWriter.write() from closing its stream",
      "parentUuid": "e6ba80af_0c6a416f",
      "revId": "1c0df94261d63b13c8e42dde1700a13001725f85",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ],
  "submitRequirementResults": []
}