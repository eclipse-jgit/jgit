{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "683b616f_37d2b81a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 22
      },
      "lineNbr": 9,
      "author": {
        "id": 1022030
      },
      "writtenOn": "2025-05-14T15:37:14Z",
      "side": 1,
      "message": "Yes it does, so long as you have `trustPackedRefsStat` set correctly. Have you found some other case where you think `getPackedRefs()` is returning an outdated view of packed-refs?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "ceb490fd3eda5c7bfa0ad60d49793d45031919f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a54daf0_cd55972c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 22
      },
      "lineNbr": 9,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-05-14T18:31:18Z",
      "side": 1,
      "message": "@danielesassoli@gmail.com did you have in your tests any specific `.gitconfig` or `jgit.config`? If yes, can you share it?",
      "parentUuid": "683b616f_37d2b81a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "ceb490fd3eda5c7bfa0ad60d49793d45031919f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c60b215_a8fe007c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 22
      },
      "lineNbr": 9,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-05-14T19:57:47Z",
      "side": 1,
      "message": "The issue is clarified: @danielesassoli@gmail.com\u0027s comments are referring to the `SnapshottingRefDirectory` and not the `RefDirectory`, which doesn\u0027t present the issue because it does a conditional refresh.\n\nI believe it makes sense to leave the `SnapshottingRefDirectory` beahaviour aside for now and concentrate in fixing `RefDirectory` alone, for not mixing two different problems.",
      "parentUuid": "3a54daf0_cd55972c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "ceb490fd3eda5c7bfa0ad60d49793d45031919f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b01073b0_e875683a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-05-14T19:57:47Z",
      "side": 1,
      "message": "@danielesassoli@gmail.com we concentrate on one problem at a time and fix `RefDirectory` first, without mixing the `SnapshottingRefDirectory` behaviour which doesn\u0027t refresh on `getPackedRefs()` because it actually use an in-memory snapshot.",
      "revId": "ceb490fd3eda5c7bfa0ad60d49793d45031919f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "765cab45_6126e9b8",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/RefDirectory.java",
        "patchSetId": 22
      },
      "lineNbr": 686,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-05-14T20:07:52Z",
      "side": 1,
      "message": "You should keep the double pattern of use of `getPackedRefs()` outside and `refreshPackedRefs()` inside, as it would get the latest packed refs before the `if()`",
      "range": {
        "startLine": 685,
        "startChar": 0,
        "endLine": 686,
        "endChar": 32
      },
      "revId": "ceb490fd3eda5c7bfa0ad60d49793d45031919f3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}