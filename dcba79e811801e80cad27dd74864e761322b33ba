{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ff9694da_2b2a195c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1179
      },
      "writtenOn": "2022-06-08T05:28:15Z",
      "side": 1,
      "message": "The code in question reads *system specific* input from processes and writes it back to the system output. Conversion here would break that.\n\nI believe adding suppression annotations is the right solution here. ",
      "revId": "dcba79e811801e80cad27dd74864e761322b33ba",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41df086a_c629224d",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/DiffTool.java",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1179
      },
      "writtenOn": "2022-06-08T05:28:15Z",
      "side": 1,
      "message": "I might be wrong, but this change would break system encoded output converting it to utf8.",
      "revId": "dcba79e811801e80cad27dd74864e761322b33ba",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b41b583_397d6924",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/DiffTool.java",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 44628
      },
      "writtenOn": "2022-06-08T07:16:37Z",
      "side": 1,
      "message": "Alternatively use SystemReader.getInstance().getDefaultCharset().",
      "parentUuid": "41df086a_c629224d",
      "revId": "dcba79e811801e80cad27dd74864e761322b33ba",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b4b5c47_9ec11c65",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/DiffTool.java",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 1684
      },
      "writtenOn": "2022-06-08T07:36:33Z",
      "side": 1,
      "message": "Yes, this is also what error prone suggesting:\n\n```\n  Did you mean \u0027outw.println(new String(result.getStdout().toByteArray(), UTF_8));\u0027 or \u0027outw.println(new String(result.getStdout().toByteArray(), Charset.defaultCharset()));\u0027?\norg.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/MergeTool.java:290: error: [DefaultCharset] Implicit use of the platform default charset, which can result in differing behaviour between JVM executions or incorrect behavior if the encoding of the data source doesn\u0027t match expectations.\n\t\t\t\t\terrw.println(new String(result.getStderr().toByteArray()));\n\t\t\t\t\t             ^\n    (see https://errorprone.info/bugpattern/DefaultCharset)\n  Did you mean \u0027errw.println(new String(result.getStderr().toByteArray(), UTF_8));\u0027 or \u0027errw.println(new String(result.getStderr().toByteArray(), Charset.defaultCharset()));\u0027?\nTarget //:all failed to build\nUse --verbose_failures to see the command lines of failed build steps.\nINFO: Elapsed time: 1.875s, Critical Path: 1.77s\nINFO: 2 processes: 2 internal.\nFAILED: Build did NOT complete successfully\n```",
      "parentUuid": "1b41b583_397d6924",
      "revId": "dcba79e811801e80cad27dd74864e761322b33ba",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3453521d_6fb8991e",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/DiffTool.java",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 44628
      },
      "writtenOn": "2022-06-08T08:45:50Z",
      "side": 1,
      "message": "No, do _not_ use Charset.defaultCharset(). errorprone is wrong here. As of JEP 400 (Java 17), Charset.defaultCharset() is _always_ UTF_8.\n\nUse SystemReader.getInstance().getDefaultCharset() if dealing with input/output to external processes.\n\nAs of Java 17 there is also Console.charset(), but that uses system property \"sun.stdout.encoding\", which doesn\u0027t seem to be related to \"native.encoding\".",
      "parentUuid": "7b4b5c47_9ec11c65",
      "revId": "dcba79e811801e80cad27dd74864e761322b33ba",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}