{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ab1c0260_7b605efb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 27
      },
      "lineNbr": 7,
      "author": {
        "id": 1020855
      },
      "writtenOn": "2025-03-19T23:16:09Z",
      "side": 1,
      "message": "RevWalk: Keep the TreeRevFilter stats in the walk",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef74730d_a4555145",
        "filename": "/COMMIT_MSG",
        "patchSetId": 27
      },
      "lineNbr": 7,
      "author": {
        "id": 1037694
      },
      "writtenOn": "2025-03-24T22:12:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ab1c0260_7b605efb",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec4fa5a7_556b6cf1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 27
      },
      "lineNbr": 9,
      "author": {
        "id": 1020855
      },
      "writtenOn": "2025-03-19T23:16:09Z",
      "side": 1,
      "message": "Try to use active voice: https://developers.google.com/tech-writing/one/active-voice\n\ne.g. The StartGenerator creates a TreeRevFilter if the caller sets a TreeFilter in the RevWalk. As this happens inside the RevWalk, the caller doesn\u0027t have access to the TreeRevFilter reference and cannot read its stats (e.g. the success rate of the changed path filters).\n\nKeep the TreeRevFilter stats in the RevWalk, as it is visible from both, the TreeFilter and the caller.",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "145706ba_d35c099c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 27
      },
      "lineNbr": 9,
      "author": {
        "id": 1037694
      },
      "writtenOn": "2025-03-24T22:12:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec4fa5a7_556b6cf1",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c639c13_434eb397",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 27
      },
      "lineNbr": 846,
      "author": {
        "id": 1020855
      },
      "writtenOn": "2025-03-19T23:16:09Z",
      "side": 1,
      "message": "public TreeRevFilterStats getTreeRevFilterStats() {\n\n(as this is only about the TreeRevFilter).",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18288e87_c5dc63e2",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 27
      },
      "lineNbr": 846,
      "author": {
        "id": 1037694
      },
      "writtenOn": "2025-03-24T22:12:45Z",
      "side": 1,
      "message": "technically, the intention is to track any stats generated by a component (filter/generator/queue) of RevWalk that the caller does not have access to. \n\nBut under the proposed use case, it\u0027s indeed only tracking stats from TreeRevFilter. Since this is a public API, we might decide to add other stats (not from TreeRevFilter) in the future, but changing it from `getTreeRevFilterStats` to something more generic will require the @deprecate process. Frankly, having an exclusive TreeRevFilterStats in RevWalk is a bit strange...\n\nAlternative 1: maybe we could do something similar to the `BlameCache.get` interface? e.g. let the caller provides an `StatsCollector` interface with `increment(metricName, count)` method, then have the TreeRevFilter get the StatsCollector from RevWalk. Curious what do you think about this approach? or do you think this is too much effort?\n\nAlternative 2: we could just make TreeRevFilterStats within the TreeRevFilter class, then set it as a field in RevWalk during the construction of TreeRevFilter.",
      "parentUuid": "2c639c13_434eb397",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba2db8a0_cb98f72f",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 27
      },
      "lineNbr": 1869,
      "author": {
        "id": 1020855
      },
      "writtenOn": "2025-03-19T23:16:09Z",
      "side": 1,
      "message": "The methods modifying the values can be package-private. See suggestion in TreeRevFilter to have just one method for the cpf results.",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f88adbb0_55f9c21c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/TreeRevFilter.java",
        "patchSetId": 27
      },
      "lineNbr": 158,
      "author": {
        "id": 1020855
      },
      "writtenOn": "2025-03-19T23:16:09Z",
      "side": 1,
      "message": "All these if/else just to update stats are a distraction on the (already complicated) flow of the method.\n\nMaybe we could just do in L158:\nwalker.getTreeRevFilterStats().add(changedPathFilterUsed, mustCalculateChgs, chgs \u003e 0);\n\nand that method does the ifs inside.",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb034401_9cde370a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/TreeRevFilter.java",
        "patchSetId": 27
      },
      "lineNbr": 158,
      "author": {
        "id": 1037694
      },
      "writtenOn": "2025-03-24T22:12:45Z",
      "side": 1,
      "message": "echo https://review.gerrithub.io/c/eclipse-jgit/jgit/+/1192799/comment/2c639c13_434eb397/.\n\nIf we make the stats class into exclusively `TreeRevFilterStats`, then putting the ifs in it would make sense.Though putting a stats class into RevWalk exclusively for a RevFilter implmenetation is a bit strange, no?",
      "parentUuid": "f88adbb0_55f9c21c",
      "revId": "d8b1aae178cb9312a9618238e66ec86189113f15",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}