{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "168067bb_ff4d9ec0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/ChangedPathFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-08-31T21:56:52Z",
      "side": 1,
      "message": "Why is this an estimation? IIUC the bloom is \"#-of-paths * BITS_PER_ENTRY / 8\" (rounding up), so you should get also a precise answer (making sure the rounding is fine).",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b00dcb3c_3fa96301",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/ChangedPathFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 307612
      },
      "writtenOn": "2023-09-01T15:32:21Z",
      "side": 1,
      "message": "this is an estimation because the \"path\" value being returned here is a calculation not the actual value being passed into the constructor at the point of object construction.",
      "parentUuid": "168067bb_ff4d9ec0",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c95eee92_d7696998",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/ChangedPathFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 165,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-09-01T18:23:44Z",
      "side": 1,
      "message": "I meant that the calculation is deterministic. Is there any case where this would show a different result?",
      "parentUuid": "b00dcb3c_3fa96301",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab2fd675_b90fee24",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/CommitGraphWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-08-31T21:56:52Z",
      "side": 1,
      "message": "Chuncks and their size are already known in createChunks(), if you need this info, you can probably record it there.",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8c6200c_04f169e7",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/CommitGraphWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 307612
      },
      "writtenOn": "2023-09-01T15:32:21Z",
      "side": 1,
      "message": "this is a personal preference. imo, createChunks don\u0027t guaranteed the chunks will be write successfully, we should always collect data as close to writing to disk as possible. \n\nif the concern is why don\u0027t we just store the ChunkHeader objects in the stats, that\u0027s because ChunkHeader could contain the stream data which we don\u0027t need.",
      "parentUuid": "ab2fd675_b90fee24",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93d35dbe_7d21c7a9",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/CommitGraphWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-09-01T18:23:44Z",
      "side": 1,
      "message": "\u003e createChunks don\u0027t guaranteed the chunks will be write successfully\n\nWhat guarantee does it provide to do it here? IIUC if there is any problem writing there will be an exception and the stats are gone in any case.\n\nThe flow in this class is:\n#1 createChunks calculates the chunks and sizes to write. As it needs the size, in some it does the actual calculations (e.g. bloom filters)\n#2 writeHeaders uses the information above to write the header\n#3 writeChunks uses the information above to write the different chunks\n\nThe information this is trying to write is calculated in #1 and immutable. Waiting to record it later doesn\u0027t add and spreads \"collecting\" stats. Limiting the scope of the stats object helps to understand/maintain the code. \n\nRight now stats is only modified inside createChucks() and that would be a nice thing to keep.",
      "parentUuid": "b8c6200c_04f169e7",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5cd7c8f2_c1621b37",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/commitgraph/CommitGraphWriter.java",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 129259
      },
      "writtenOn": "2023-09-01T18:28:31Z",
      "side": 1,
      "message": "Perhap we could throw an exception of the size written and size passed to createChunks() don\u0027t match?",
      "parentUuid": "93d35dbe_7d21c7a9",
      "revId": "4465007822d304a65fd2fc56d2a4ef2bcbf159db",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}