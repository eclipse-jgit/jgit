{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b10c2d50_79cd7d13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 44628
      },
      "writtenOn": "2023-09-23T08:29:09Z",
      "side": 1,
      "message": "Can\u0027t comment on the commit graph use of ByteBuffer. The method takes a Set\u003cByteBuffer\u003e as input, but ByteBuffer\u0027s hashCode and equals depend on the **remaining** content, so they may change if the buffers are read. Perhaps ByteBuffer is not the correct abstraction there. In any case the use of ByteBuffer there looks suspicious to me.",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca1233d6_4ed99d57",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java",
        "patchSetId": 2
      },
      "lineNbr": 413,
      "author": {
        "id": 44628
      },
      "writtenOn": "2023-09-23T08:29:09Z",
      "side": 1,
      "message": "Same as below?\n\n  ByteBuffer rawbuf \u003d IO.readWholeStream(filterClean(is), (int) len);\n  return rawbuf.available();",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da96508c_d272741e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java",
        "patchSetId": 2
      },
      "lineNbr": 442,
      "author": {
        "id": 44628
      },
      "writtenOn": "2023-09-23T08:29:09Z",
      "side": 1,
      "message": "Why are we reading into a ByteBuffer here?\n\nSeems to me we could just do\n\n  ByteBuffer rawbuf \u003d IO.readWholeStream(filterClean(is), (int) len);\n  canonLen \u003d rawBuf.available();\n  \nFor returning, I\u0027d create a new ByteBufferInputStream that can wrap a ByteBuffer as an InputStream, and then\n\n  return new ByteBufferInputStream(rawBuf);\n  \nAnd finally I\u0027d rename rawbuf to filteredData.",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de1dd23b_97a5fcaf",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java",
        "patchSetId": 2
      },
      "lineNbr": 442,
      "author": {
        "id": 4
      },
      "writtenOn": "2023-09-23T16:40:26Z",
      "side": 1,
      "message": "ByteBuffer doesn\u0027t have an available() method, did you mean capacity() ?\n\nWhere can I find ByteBufferInputStream ?",
      "parentUuid": "da96508c_d272741e",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efaf8ab9_2eb5b3ed",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java",
        "patchSetId": 2
      },
      "lineNbr": 442,
      "author": {
        "id": 44628
      },
      "writtenOn": "2023-09-23T17:15:29Z",
      "side": 1,
      "message": "Sorry. available() is the method in the Apache MINA sshd buffer implementation. For Java ByteBuffer, it\u0027s remaining().\n\nByteBufferInputStream: that\u0027s the rub. Java doesn\u0027t have it, so we\u0027d have to write it ourselves. But on first glance [1] looks like a reasonable implementation. (I\u0027d drop \"synchronized\", though.)\n\n[1] https://gist.github.com/ncruces/da984d7d024eeeb5597ad81c7ac7683a",
      "parentUuid": "de1dd23b_97a5fcaf",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b912d41e_2d0a6fc5",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java",
        "patchSetId": 2
      },
      "lineNbr": 483,
      "author": {
        "id": 44628
      },
      "writtenOn": "2023-09-23T08:29:09Z",
      "side": 1,
      "message": "This method would then be superfluous.",
      "revId": "5c6cef1052d0f19c4f6c5897ed59b7336f300492",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}