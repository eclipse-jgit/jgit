{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f2ab60ba_63b30f13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2024-02-26T09:31:59Z",
      "side": 1,
      "message": "Thanks, this is a godsend, I was just considering to implement this since we face these issues on our new k8s setup running multiple primaries/replicas with HA plugin on a shared NFS volume :-)\n\nWill deploy this on our staging cluster and run some load tests.",
      "revId": "43c340d2773222f7fd783238b4a042cfe55b3233",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed2985e7_5311b740",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1022030
      },
      "writtenOn": "2024-02-27T00:27:07Z",
      "side": 1,
      "message": "Fantastic! Glad that worked out. Please do let us know how your testing goes. Kaushik ran some tests with this + the (soon to be pushed) child change that updates SnapshottingRefDirectoy and it seemed \"ok\".",
      "parentUuid": "f2ab60ba_63b30f13",
      "revId": "43c340d2773222f7fd783238b4a042cfe55b3233",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11755b2b_41fb665b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/RefDirectory.java",
        "patchSetId": 2
      },
      "lineNbr": 1250,
      "author": {
        "id": 1018954
      },
      "writtenOn": "2024-02-26T14:55:00Z",
      "side": 1,
      "message": "Javadoc of the `newInputStream` doesn\u0027t specify that it supports paths which represent directories. I tried this method with a directory and found out that it indeed returns an input stream. The Javadoc also doesn\u0027t specify that it doesn\u0027t support paths which are directories. How did find out to use `newInputStream` on directories? Maybe put a note/link in a comment here?",
      "range": {
        "startLine": 1250,
        "startChar": 29,
        "endLine": 1250,
        "endChar": 64
      },
      "revId": "43c340d2773222f7fd783238b4a042cfe55b3233",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c74ae95_19611848",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/RefDirectory.java",
        "patchSetId": 2
      },
      "lineNbr": 1250,
      "author": {
        "id": 1037769
      },
      "writtenOn": "2024-02-27T00:17:59Z",
      "side": 1,
      "message": "We tried it to see if we could be consistent with how packed-refs were refreshed with the `after-open` setting and found that it worked. Also, `newInputStream` performs slightly better than `newDirectoryStream`. I had a timer around `refreshPathToLooseRef` and ran ~300 iterations of `exactRef` on a loose ref. Here are the average numbers:\n \n```\n java 17\n   newInputStream \u003d 1.40 ms \n   newDirectoryStream \u003d 1.43 ms\n java 11\n   newInputStream \u003d 1.37 ms \n   newDirectoryStream \u003d 1.46 ms\n```",
      "parentUuid": "11755b2b_41fb665b",
      "range": {
        "startLine": 1250,
        "startChar": 29,
        "endLine": 1250,
        "endChar": 64
      },
      "revId": "43c340d2773222f7fd783238b4a042cfe55b3233",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}