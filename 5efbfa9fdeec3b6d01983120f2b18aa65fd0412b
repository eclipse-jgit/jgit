{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5a8b2a65_b97f63c1",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 513,
      "author": {
        "id": 129259
      },
      "writtenOn": "2022-12-16T17:23:53Z",
      "side": 1,
      "message": "I wonder if the ObjectReader needs to know about commitGraph if it\u0027s just getting it from ObjectDatabase anyway. IIRC, anywhere you can obtain an ObjectReader, you have access to the ObjectDatabase, so the commitGraph can be obtained directly from ObjectDatabase. I\u0027m thinking of RevWalk in the later patchset https://git.eclipse.org/r/c/jgit/jgit/+/183079/40/org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java.\n\nHaving the ObjectReader providing the commitGraph gives the impression that pack data and commit graph are collocated, which might be the case for Dfs.\n\nThanks!",
      "range": {
        "startLine": 513,
        "startChar": 20,
        "endLine": 513,
        "endChar": 34
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "feec4325_9a184d16",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 513,
      "author": {
        "id": 304466
      },
      "writtenOn": "2022-12-19T02:38:38Z",
      "side": 1,
      "message": "\u003e I wonder if the ObjectReader needs to know about commitGraph if it\u0027s just getting it from ObjectDatabase anyway. IIRC, anywhere you can obtain an ObjectReader, you have access to the ObjectDatabase, so the commitGraph can be obtained directly from ObjectDatabase. \n\nProbably not for RevWalk, which has multiple constructors. If it is \"public RevWalk(Repository repo)\", then we can get ObjectDataBase, but if it is “public RevWalk(ObjectReader or)”, it will not work. So I think this patch should still be necessary.\n\nIn my opinion, ObjectReader#getCommitGraph() is very similar to ObjectReader#getBitmapIndex().",
      "parentUuid": "5a8b2a65_b97f63c1",
      "range": {
        "startLine": 513,
        "startChar": 20,
        "endLine": 513,
        "endChar": 34
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bfb980f_0d6516ca",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 513,
      "author": {
        "id": 129259
      },
      "writtenOn": "2022-12-19T20:21:31Z",
      "side": 1,
      "message": "Since commits are objects, I think it would be fine to obtain the commitGraph via objectReader. Thanks for bringing up the potential code change needed for RevWalk in absence of this change.",
      "parentUuid": "feec4325_9a184d16",
      "range": {
        "startLine": 513,
        "startChar": 20,
        "endLine": 513,
        "endChar": 34
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6aab46a3_ae09f8df",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 513,
      "author": {
        "id": 256613
      },
      "writtenOn": "2022-12-19T20:22:02Z",
      "side": 1,
      "message": "Agree to have getCommitGraph() rather than expose ObjDB to the RevWalk. Returning empty commit graph is less risky in case someone has overwritten this class, because on this level we don\u0027t know about the DB.",
      "parentUuid": "feec4325_9a184d16",
      "range": {
        "startLine": 513,
        "startChar": 20,
        "endLine": 513,
        "endChar": 34
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89329620_b9bd73dd",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 514,
      "author": {
        "id": 256613
      },
      "writtenOn": "2022-12-19T20:22:02Z",
      "side": 1,
      "message": "Can we return an empty commit graph instead? E.g. separate implementation which always return \"not in the graph\". This will simplify the code and save us from potential NPE.",
      "range": {
        "startLine": 514,
        "startChar": 9,
        "endLine": 514,
        "endChar": 13
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22abcb65_27b34b0c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/ObjectReader.java",
        "patchSetId": 6
      },
      "lineNbr": 514,
      "author": {
        "id": 256613
      },
      "writtenOn": "2022-12-19T20:34:23Z",
      "side": 1,
      "message": "\"Null Pointer References: The Billion Dollar Mistake\"",
      "parentUuid": "89329620_b9bd73dd",
      "range": {
        "startLine": 514,
        "startChar": 9,
        "endLine": 514,
        "endChar": 13
      },
      "revId": "5efbfa9fdeec3b6d01983120f2b18aa65fd0412b",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}