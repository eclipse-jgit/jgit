{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0a1fc8c7_21572fcf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-02-07T15:20:17Z",
      "side": 1,
      "message": "I\u0027ve run the GetRefsBenchmark [1] before and after this change, and the results suggest some performance regressions introduced with this implementation.\n\nYou can find the full benchmark results here [2] for reference.\n\n[1] https://github.com/eclipse-jgit/jgit/blob/master/org.eclipse.jgit.benchmarks/src/org/eclipse/jgit/benchmarks/GetRefsBenchmark.java\n\n[2] https://pastebin.com/raw/LkCfzEMr",
      "revId": "2f3b61da547594e38ea527efb6c6c5f5a0a45c6e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9fbfa9ab_101ae40e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2025-02-10T22:28:11Z",
      "side": 1,
      "message": "I updated the GetRefsBenchmark to use the new 3-state TrustStat enum and ran it on master, this change 1206683 and the successor change using FileSnapshot to speedup auto-refresh.\n\nFind the results here (reordered results to simplify comparison)\nhttps://pastebin.com/GKcjEL1U",
      "parentUuid": "0a1fc8c7_21572fcf",
      "revId": "2f3b61da547594e38ea527efb6c6c5f5a0a45c6e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c892f69c_673f4433",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2025-02-11T15:56:05Z",
      "side": 1,
      "message": "Thanks for sharing this and for updating the benchmark @matthias.sohn@sap.com.\n\nAfter reviewing the performance of getExactRef, it seems that Change 1206683 does introduce a significant performance regression compared to the baseline.\n\nThat said, Change 1206684 shows a notable improvement, although it\u0027s still approximately twice as slow as the baseline.\n\nInterestingly, this performance trend appears to be consistent across all `trustStat` values, suggesting the degradation isn’t tied to any specific setting.\n\n@luca.milanesio@gmail.com – would you mind taking a look at the benchmark and sharing your thoughts?\n\nThis is a graph comparing the results: https://postimg.cc/Th1G8qCD",
      "parentUuid": "9fbfa9ab_101ae40e",
      "revId": "2f3b61da547594e38ea527efb6c6c5f5a0a45c6e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f374566_201dfd23",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2025-02-12T22:17:47Z",
      "side": 1,
      "message": "Yes, I know, but on the other hand in many scenarios there are multiple threads or processes changing refs of the same repo concurrently so that reading refs from a potentially outdated snapshot may need a re-read when an update transaction fails since another thread/process modified tables.list by adding another reftable. This means in an environment where many threads do ref updates on the same repo using auto-refresh might be actually faster than re-reading refs after a failed update.\n\nI will add an API method for enabling/disabling auto-refresh and make #reloadIfNecessary public to allow clients to refresh explicitly.",
      "parentUuid": "c892f69c_673f4433",
      "revId": "2f3b61da547594e38ea527efb6c6c5f5a0a45c6e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b5824b4_e12a96e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 13
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2025-02-14T01:13:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f374566_201dfd23",
      "revId": "2f3b61da547594e38ea527efb6c6c5f5a0a45c6e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}