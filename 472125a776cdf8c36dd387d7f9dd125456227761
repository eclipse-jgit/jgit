{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "df5a975f_0a0486f6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T20:01:14Z",
      "side": 1,
      "message": "We should load the bitmap isn\u0027t it? What\u0027s the point of reloading the pack if we know that *that* information isn\u0027t changed?\n\nLoading a packfile is *very expensive* and I would avoid it if we can.",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 11
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d630379_508f73b6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-03T22:20:46Z",
      "side": 1,
      "message": "Good catch! We can change the solution to just reload the bitmap",
      "parentUuid": "df5a975f_0a0486f6",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 11
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b7935e7_49612dce",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1541
      },
      "writtenOn": "2023-01-03T22:34:05Z",
      "side": 1,
      "message": "\u003e Loading a packfile is *very expensive* and I would avoid it if we can.\n\nI think any optimization here is risky and should be a separate change from a correctness fix. If you can clearly show a perf impact without the optimization then maybe it would be fine on a stable branch, but otherwise I think that kind of optimization should go on master (or be omitted entirely).",
      "parentUuid": "2d630379_508f73b6",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 11
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca13cb13_4ef5ab20",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-04T20:16:30Z",
      "side": 1,
      "message": "Doing something that isn\u0027t needed and was not happening before, it is a performance regression rather than optimisation :-) but that\u0027s my personal opinion.\n\nAs long as this is explained in the commit message, I am fine to address this concern in a separate change, bearing in mind that the follow-up may have to undo part of this fix, at least parts of it.",
      "parentUuid": "6b7935e7_49612dce",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 11
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64f5f9d7_43041e70",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-04T23:14:31Z",
      "side": 1,
      "message": "Ok, I split that change into two. This one will focus on reloading pack file when bitmap file is modified. Second one will do the optimization of reloading just the bitmap index. I hope that this helps to find a common ground",
      "parentUuid": "ca13cb13_4ef5ab20",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 11
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b1d1587_18d33a59",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T20:01:14Z",
      "side": 1,
      "message": "... and that makes sense IMHO. Here the point is that we need also to understand if the bitmap has shown up or been modified and load it as well.",
      "range": {
        "startLine": 10,
        "startChar": 5,
        "endLine": 10,
        "endChar": 34
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84e25a29_04690213",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-03T22:20:46Z",
      "side": 1,
      "message": "Yes, I will change the description to mention that just the bitmap should be reload",
      "parentUuid": "8b1d1587_18d33a59",
      "range": {
        "startLine": 10,
        "startChar": 5,
        "endLine": 10,
        "endChar": 34
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "414c7889_17a42cac",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T20:01:14Z",
      "side": 1,
      "message": "I believe the solution works, but at the cost of reloading a packfile that hasn\u0027t changed.",
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2a7f3bd_83313880",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/GcBasicPackingTest.java",
        "patchSetId": 4
      },
      "lineNbr": 427,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T21:02:12Z",
      "side": 1,
      "message": "I see this _hack_ has been copied from `PackFileSnapshotTest.java:182`, however it relies on an implementation detail which may change in the future, making this hack fragile.\n\nCould we just invoke the scanPacks somehow?",
      "range": {
        "startLine": 424,
        "startChar": 0,
        "endLine": 427,
        "endChar": 56
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "010d7d27_80ebac24",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/GcBasicPackingTest.java",
        "patchSetId": 4
      },
      "lineNbr": 427,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-03T22:23:49Z",
      "side": 1,
      "message": "I agree that\u0027s a hack but I cannot find any better way to force the scanPack operation. As you mentioned I found that code in other test suite. To fix it properly could we have a follow up change where we will fix it in all tests?",
      "parentUuid": "f2a7f3bd_83313880",
      "range": {
        "startLine": 424,
        "startChar": 0,
        "endLine": 427,
        "endChar": 56
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e0ad93b_fde8d703",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/GcBasicPackingTest.java",
        "patchSetId": 4
      },
      "lineNbr": 427,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-04T20:16:30Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "010d7d27_80ebac24",
      "range": {
        "startLine": 424,
        "startChar": 0,
        "endLine": 427,
        "endChar": 56
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25fcb3e4_be62a5e4",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 102,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T20:01:14Z",
      "side": 1,
      "message": "bitmap",
      "range": {
        "startLine": 102,
        "startChar": 36,
        "endLine": 102,
        "endChar": 42
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5dd17d21_87a13609",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 102,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-03T22:20:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "25fcb3e4_be62a5e4",
      "range": {
        "startLine": 102,
        "startChar": 36,
        "endLine": 102,
        "endChar": 42
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d6c626f_55abd490",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 359,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-03T20:01:14Z",
      "side": 1,
      "message": "I don\u0027t understand this check: you are saying that the bitmap file has been modified if the bitmapFile is null?\n\nI believe overall we should make sure that bitmapFile *is not null* here, otherwise what\u0027s the point of checking if that has been modified?",
      "range": {
        "startLine": 359,
        "startChar": 14,
        "endLine": 359,
        "endChar": 60
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8b15940_05be1ddd",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 359,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-03T20:37:46Z",
      "side": 1,
      "message": "Yes, this means that we had a bitmap but now it was removed",
      "parentUuid": "5d6c626f_55abd490",
      "range": {
        "startLine": 359,
        "startChar": 14,
        "endLine": 359,
        "endChar": 60
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77a1dea0_db895e14",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 359,
      "author": {
        "id": 97483
      },
      "writtenOn": "2023-01-04T20:16:30Z",
      "side": 1,
      "message": "OK, but that is quite implicit. Can we make it a specific case instead?",
      "parentUuid": "b8b15940_05be1ddd",
      "range": {
        "startLine": 359,
        "startChar": 14,
        "endLine": 359,
        "endChar": 60
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bceb422c_6113216c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/Pack.java",
        "patchSetId": 4
      },
      "lineNbr": 359,
      "author": {
        "id": 290522
      },
      "writtenOn": "2023-01-04T22:56:33Z",
      "side": 1,
      "message": "ok, I will add explicit check for that",
      "parentUuid": "77a1dea0_db895e14",
      "range": {
        "startLine": 359,
        "startChar": 14,
        "endLine": 359,
        "endChar": 60
      },
      "revId": "472125a776cdf8c36dd387d7f9dd125456227761",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}